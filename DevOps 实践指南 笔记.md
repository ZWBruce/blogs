# 三步工作法

1. 实现从开发到运维的工作快速进行（从左向右的工作流）。使工作过程可视化，减少工作进行中的等待时间，并且分析等待的主要原因。通过完备的自动化测试，在测试环境及时发现错误，及时解决。  

相关实践包括持续构建、集成、测试和部署（？？？）。

具体实践：
- 限制在制品数量 -> 限制同时进行的需求数，可以看出谁比较空闲，谁的需求比较多，从而发现影响工作效率的原因。
- 减少批量大小 -> 持续集成、持续部署，大功能拆分一次次部署。
- 减少交接次数 -> 减少不同人员之间沟通次数。
- 持续识别和改善约束点 -> 找出工作流程中耗时的点或容易出问题的点，对其进行优化。
- 消除价值流中的困境和浪费 -> 开发效率低（做了本不需要的功能，填坑，并行时切换任务带来的成本等）


2. 在测试或者生产环境出现问题反馈到开发时（从右向左的工作流），要建立持续、快速的反馈机制。

- 及时（尽早）发现问题 -> 提交代码之后的自动化测试，或者每次发往测试环境，或者本地 demo时期，尽量早的发现问题。
- 群策群力，战胜问题获取新知 -> 发现问题后要让所有相关人员一起解决，在解决问题过程中让所有相关人员获得经验。
 
3. 持续学习与实验原则

> 支持创新，包容错误，使每个员工勇于尝试新东西。
 
- 组内建立互相信任的文化，鼓励创新，从成功和失败中积累经验教训，从而识别有价值的想法，摒弃无用想法。并且把局部经验推广到全局。
- 犯错时尽量不要去责备，会导致人员产生恐惧感，进而会逃避责任。如果不指责，员工没有了恐惧，就可以做到坦诚，而坦诚可以有效的预防事故。
- 将日常优化制度化 -> 估时时预留部分时间来做方案调研或者代码重构，减少技术债。
- 局部发现转为全局发现 -> 定期分享。
- 日常工作中注入弹性 -> 增加代码可拓展性，鲁棒性，方便之后新增 / 修改功能。

# 第5章 选择合适的价值流作为切入点

p36 图 5-1

这章应该说的是如何选择合适的团队进行推广 devops 理念：
- 选择一些有影响力的，并且勇于创新，敢于尝试新鲜事物的，服务好他们。这些人的支持很有信服力。
- 将 devops 理念推广到其他愿意接受的团队，有了更多的成功案例，就会产生从众效应，进一步提升影响力。
- 那些坚决不愿意接受新事物的团队，放在最后再去考虑。

# 第6章 理解、可视化和运用价值流

> 这里的价值流应该是 devops 理念对于工作效率的提升。

- 组件专门的团队进行 devops 改造
- 量化 devops 改造对于效率的提升
- 对齐目标（共同的目标）
- 为非功能需求预留 20% 时间，偿还技术债（包括填坑和优化）
- 使用工具提高工作效率（共同使用的工作看板 或者 聊天群加速沟通效率）

# 第7章 参考康威定律设计组织架构

> 康威定律
> 适当减少分层有助于提高系统稳定性和可维护性（addone_core、proxy）(开发时候需要考虑多个地方维护一套逻辑，部署时候需要考虑避免服务不可用时间)

- 康威定律：软件架构一般与组织架构成正比。如让三个团队开发一个软件，这个软件就可能分为三个步骤；
- 在以职能为依据划分的团队里，完成一个需求涉及到多个团队人员时，由于各团队目标不一致，并且沟通成本高，导致任务效率低。理想情况下，一个团队内应该包含能保证团队独立运作，减少团队间沟通成本；
- 双比萨原则：保证两个披萨够团队人员享用，一般 5 - 10 人：
    - 小团队可以保证团队成员对系统有清晰、相同的理解
    - 

# 第8章 将运维融入日常开发工作

> 目前使用的大多是 serverless 或者 PaaS，无须关心这个


~~TODO 9 10 章~~

# 第11章 应用和实践持续集成

持续集成其实就是基于主干分支开发，经常（书里说每天一次）向主干分支同步代码。如果经常在自己开发分支上开发，会导致开发分支代码和主干分支差异很大，每次合入主干分支可能需要花费大量时间解决冲突，而且出问题了也不方便排查（有可能是别人的问题，而这个问题已经在主干分支解决了，但是开发分支并没有解决）。

如果基于主干分支之外的分支开发（如 preonline），可能会导致：
- 只能保证 preonline 分支是没问题的，而无法确保 master 分支是没问题的；
- 每次代码变更触发的测试是跑的 preonline，而不是 master；
- preonline 和 master 需要手动同步，增加研发链路步骤。

# 第12章 将部署与发布解耦

部署：在特定环境中安装指定版本的软件。

发布：把一个特性提供给部分或者所有客户。

## 蓝绿部署
准备两套环境，只向用户开放一个环境，在出现问题时及时切换。
- 问题：数据库

## 金丝雀发布和群体免疫系统发布模式

金丝雀发布：逐步向部分用户开发新功能，观察效果。

群体免疫系统发布模式：当新功能效果不及预期时，自动回滚代码。

## 特性开关

通过开关的方式，控制功能入口

## 黑启动

不暴露新功能给用户，悄悄测试新功能，待稳定之后正式上线。
